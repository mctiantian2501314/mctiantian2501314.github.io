<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            background: #000;
            color: #0f0;
            font-family: 'Courier New';
            position: relative;
            overflow: hidden;
        }
        .crt-effect {
            position: fixed;
            top:0;
            left:0;
            width:100%;
            height:100%;
            background: repeating-linear-gradient(180deg, 
                rgba(0,255,0,0.05) 0, 
                rgba(0,255,0,0.05) 2px, 
                transparent 4px);
            pointer-events: none;
            z-index: 999;
        }
        .scene {
            display: none;
            padding: 20px;
            border: 2px dashed #0f0;
            margin: 10px;
            background: rgba(0,30,0,0.9);
            min-height: 80vh;
        }
        .split-screen {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .glitch-text {
            animation: glitch 1s infinite;
            text-shadow: 0 0 10px #0f0;
        }
        @keyframes glitch {
            0%,100% { text-shadow: 2px 2px #ff00ff; }
            50% { text-shadow: -2px -2px #00ffff; }
        }
        .shrink { animation: shrink 3s forwards; }
        @keyframes shrink { to { transform: scale(0.1); } }
        
        /* 新增模态框样式 */
        #modal-overlay {
            display: none;
            position: fixed;
            top:0;
            left:0;
            width:100%;
            height:100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
        }
        .modal-box {
            position: relative;
            width: 80%;
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            background: #002200;
            border: 2px solid #0f0;
            animation: modalIn 0.3s cubic-bezier(0.18, 0.89, 0.32, 1.28);
        }
        @keyframes modalIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        .chaos-char {
            display: inline-block;
            transition: all 0.3s;
        }

        /* 新增目录样式 */
        .chaos-directory {
            background: rgba(0,0,0,0.5);
            padding: 15px;
            border: 1px solid #f0f;
        }
        .disordered-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .disordered-list li {
            margin: 8px;
            padding: 8px 12px;
            background: #001122;
            border: 1px solid #0ff;
            transform: rotate(calc(-5deg + 10deg * random()));
            display: inline-block;
            transition: all 0.3s;
            cursor: pointer;
        }
        .disordered-list li:hover {
            transform: rotate(0deg) scale(1.1);
            background: #00ff0022;
            border-color: #0f0;
        }
        .disordered-list li a {
            color: #f0f;
            text-decoration: none;
            text-shadow: 0 0 5px #ff00ff;
        }
        /* 增强混乱字符效果 */
        .chaos-char {
            display: inline-block;
            transition: all 0.3s;
            animation: charFloat 2s infinite;
        }
        @keyframes charFloat {
            0%,100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-2px) rotate(-2deg); }
            50% { transform: translateY(2px) rotate(2deg); }
            75% { transform: translateY(-1px) rotate(1deg); }
        }
    </style>
</head>
<body>
    <div class="crt-effect"></div>
    <h1 class="glitch-text" style="text-align:center">代码地狱突围战</h1>

    <!-- 模态框 -->
    <div id="modal-overlay" onclick="closeModal(event)">
        <div class="modal-box">
            <button onclick="closeModal(event)" style="position:absolute;top:10px;right:10px;background:#f00;color:#fff;border:none;padding:5px 10px;cursor:pointer;">×</button>
            <div id="modal-content" style="color:#0f0;max-height:70vh;overflow-y:auto;"></div>
        </div>
    </div>

    <!-- 场景1 -->
    <div id="scene1" class="scene">
        <div class="split-screen">
            <div>
                <p>🕹️ 林小北跪在包浆电竞椅上</p>
                <p>🔥 F5键插着老干妈泡面叉</p>
                <p>✨ 每次刷新掉落金元宝特效</p>
                <button onclick="showScene(2)">疯狂刷新贴吧</button>
            </div>
            <div>
                <pre style="color:#0f0">
   ░█▀▀█ █▀▀█ █▀▀▄ 
   ░█▄▄█ █▄▄█ █▀▀▄ 
   ░█░▒█ ▀░░▀ ▀▀▀░
                </pre>
            </div>
        </div>
    </div>

    <!-- 场景2 -->
    <div id="scene2" class="scene">
        <div class="split-screen">
            <div>
                <p>📝 标题栏：「真心求大佬！想要飞速中文的书源」</p>
                <p>🔥 电子香炉火星：「愿献祭室友桃花运」</p>
                <button onclick="showScene(3)">等待大佬回复</button>
            </div>
            <div>
                <pre style="color:#ff0">
   ╔══╗ ♪
   ║██║ ♫
   ║██║♫
   ║ ◎♫♪
   ╚══╝
                </pre>
            </div>
        </div>
    </div>

    <!-- 场景3 -->
    <div id="scene3" class="scene">
        <div class="split-screen">
            <div>
                <p>💥 吧友A拍案而起！</p>
                <p>🐛《新华字典》验证码倒计时：<span id="countdown">59</span>秒</p>
                <div id="progress-bar" style="border:1px solid #0f0;height:20px">
                    <div id="progress" style="background:#0f0;width:0%;height:100%"></div>
                </div>
                <button onclick="showScene(4)">尝试破解</button>
            </div>
            <div>
                <pre style="color:#f00">
  ░░░░░░░░░▄▄▄▄▄▄▄▄▄▄▄▄▄▄░░
  ░░░░░▄▄████████████████▄▄
  ░░▄██▀▀▀░░░░░░░░░░░░▀▀██▄
                </pre>
            </div>
        </div>
    </div>

    <!-- 场景4 -->
    <div id="scene4" class="scene">
        <div class="split-screen">
            <div>
                <p>💢 字体文件乱码瀑布</p>
                <p>👾 吃豆人正在吞噬代码</p>
                <button onclick="showScene(5)">继续拆解</button>
            </div>
            <div>
                <pre style="color:#0ff">
   ░░░█▀▀█ █▀▀█ █▀▀▄ 
   ░░░█▄▄█ █▄▄█ █▀▀▄ 
   ░░░█░▒█ ▀░░▀ ▀▀▀░
                </pre>
            </div>
        </div>
    </div>

    <!-- 场景5 -->
    <div id="scene5" class="scene">
        <div class="split-screen">
            <div>
                <p>🗿 甲骨文战士发言：</p>
                <pre style="color:#ff0">
   ■☰■☳■☲■
   ■商■周■甲■骨■
   ■斗■破■苍■穹■
                </pre>
                <button onclick="showScene(6)">尝试翻译</button>
            </div>
            <div>
                <pre style="color:#0f0">
   《剑来》二进制飞剑：
   01101010 01101001 
   01100001 01101110

   《十日》秦简：
   ░░░░░░░░░░░░░░░░░░░░░░░░
   ░░█▀▀░█▀█░█▀▄░█▀▀░▀█▀░░
   ░░▀▀█░█▀█░█▀▄░█░░░░█░░░
   ░░▀▀▀░▀░▀░▀░▀░▀▀▀░░▀░░░
   ░░░░░░█▄█░█░█░█▀▀░░░░░░
                </pre>
                <p style="color:#f00">※背景播放编钟版《爱情买卖》※</p>
            </div>
        </div>
    </div>

    <!-- 场景6 -->
    <div id="scene6" class="scene">
        <div class="split-screen">
            <div>
                <p>🌀 AES加密绞肉机启动</p>
                <pre style="color:#f00">
   ░▒▓███████▓▒░
   █ AES 处理器 █
   ░▼▼▼▼▼▼▼▼▼░
                </pre>
                <button onclick="showScene7()">突破防火墙</button>
            </div>
            <div>
                <div class="chaos-directory">
                    <h2 style="color:#0ff">混乱的目录</h2>
                    <ul id="chaos-list" class="disordered-list">
                        <li><a>1. 第1章</a></li>
                        <li><a>3. 第3章</a></li>
                        <li><a>2. 第2章</a></li>
                        <li><a>5. 第5章</a></li>
                        <li><a>4. 第4章</a></li>
                    </ul>
                </div>
                <p onclick="showChaosModal()" 
                   style="cursor:pointer;color:#0ff;border:1px solid #0f0;padding:10px;margin-top:20px;">
                    📖 点击查看混乱正文
                </p>
            </div>
        </div>
    </div>

    <!-- 场景7 -->
    <div id="scene7" class="scene">
        <div class="split-screen">
            <div>
                <div id="captcha1">
                  <p>等待加载中...</p>
                    <p>请临摹《清明上河图》：</p>
                    <div style="height:100px;background:#130;"></div>
                    <button onclick="showCaptcha2()">随便画画</button>
                </div>
                <div id="captcha2" style="display:none">
                    <input type="text" id="keyword" placeholder="输入神秘关键词">
                    <button onclick="validate()">提交验证</button>
                </div>
                <p id="counter" style="display:none">剩余尝试：3</p>
            </div>
            <div>
                <pre style="color:#f00">
   ▒▒▒▒▒▒▒▒▒▒▒▒▒▒
   ▒ 死亡验证系统 ▒
   ▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                </pre>
            </div>
        </div>
    </div>

    <!-- 场景8 -->
    <div id="scene8" class="scene">
        <div class="split-screen">
            <div>
                <p>⚠️ 触发终极防御：</p>
                <ul>
                    <li>密钥藏在唐诗藏头诗</li>
                    <li>代码字符跳科目三</li>
                    <li>屏幕降级为1983春晚</li>
                </ul>
                <button onclick="showEnding('good')">最终决战</button>
            </div>
            <div>
                <pre style="color:#fff">
   ▒▒▒▒▒▒▒▒▒▒▒▒▒▒
   ▒ 杨教授の微笑 ▒
   ▒▒▒▒▒▒▒▒▒▒▒▒▒▒
                </pre>
            </div>
        </div>
    </div>

    <!-- 结局 -->
    <div id="good-ending" class="scene" style="display:none">
        <h2>🎉 破解成功！</h2>
        <p>飞速中文书源已获得，恭喜你成为大佬</p>
        <button onclick="location.reload()">重新开始</button>
    </div>

    <div id="bad-ending" class="scene" style="display:none">
        <h2>💀 猝死结局</h2>
        <pre style="color:#800">
   ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
   ▒　R.I.P 1999-2023 ▒
   ▒ 　Code Never Die ▒
   ▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒▒
        </pre>
        <button onclick="location.reload()">电击复活</button>
    </div>

    <script>
        let attempts = 3;
        let timer;
        const secretCode = "飞速中文nb";

        // 初始化目录
        function initChaosList() {
            const list = document.getElementById('chaos-list');
            Array.from(list.children)
                .sort(() => Math.random() - 0.5)
                .forEach(li => {
                    li.style.transform = `rotate(${Math.random()*10-5}deg)`;
                    list.appendChild(li);
                });
        }

        function showScene(num) {
            document.querySelectorAll('.scene').forEach(s => s.style.display = 'none');
            document.getElementById(`scene${num}`).style.display = 'block';
            if(num === 3) startCountdown();
            if(num === 6) initChaosList();
        }

        function showChaosModal() {
            const content = `
                <h3 style="color:#f0f">混乱正文</h3>
                <p>${generateChaosText('第一章 剑来：\n天地不仁以万物为刍狗\n代码不义以码农为燃料...（完整正文内容）')}</p>
            `;
            document.getElementById('modal-content').innerHTML = content;
            document.getElementById('modal-overlay').style.display = 'block';
        }

        function generateChaosText(text) {
            const colors = ['#ff0000', '#00ff00', '#0000ff', '#ff00ff', '#00ffff'];
            return text.split('')
                .map(c => `<span class="chaos-char" 
                            style="transform:rotate(${Math.random()*12-6}deg);
                                   color:${colors[Math.floor(Math.random()*colors.length)]};
                                   text-shadow:0 0 5px ${colors[Math.floor(Math.random()*colors.length)]}">
                            ${c}
                          </span>`)
                .join('');
        }

        function closeModal(e) {
            if(e.target === document.getElementById('modal-overlay') || e.target.tagName === 'BUTTON') {
                document.getElementById('modal-overlay').style.display = 'none';
            }
        }

        function startCountdown() {
            let count = 59;
            let progress = 0;
            timer = setInterval(() => {
                document.getElementById('countdown').textContent = --count;
                progress = Math.min(100, progress + 1.7);
                document.getElementById('progress').style.width = progress + '%';
                if(count <= 0) {
                    clearInterval(timer);
                    showEnding('bad');
                }
            }, 1000);
        }

        function showScene7() {
            showScene(7);
            document.getElementById('captcha1').style.display = 'block';
        }

        function showCaptcha2() {
            document.getElementById('captcha1').style.display = 'none';
            document.getElementById('captcha2').style.display = 'block';
            document.getElementById('counter').style.display = 'block';
        }

        function validate() {
            const input = document.getElementById('keyword').value;
            if(input === secretCode) {
                showEnding('good');
            } else {
                if(--attempts <= 0) {
                    document.body.classList.add('shrink');
                    showEnding('bad');
                }
                document.getElementById('counter').textContent = `剩余尝试：${attempts}`;
            }
        }

        function showEnding(type) {
            clearInterval(timer);
            document.querySelectorAll('.scene').forEach(s => s.style.display = 'none');
            document.getElementById(`${type}-ending`).style.display = 'block';
        }
        
        // 初始化
        showScene(1);
    </script>
</body>
</html>
